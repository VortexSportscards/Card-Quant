import{j as e,S as Xs,a as Pt,b as Dt,P as er,C as Ut,I as _t,c as Mt,d as zt,R as Ft,L as Ot,e as Lt,f as tr,T as sr,g as rr,h as Fe,i as ar,k as nr,l as or,m as $t,U as lr,n as ir,o as cr,p as qt,D as dr,q as mr,r as Vt,u as Bt,s as Qt,t as dt,v as Gt,w as ur,x as hr,y as Ht,z as xr,A as Wt,B as Yt,E as pr,F as Kt,V as fr,G as Zt,H as Jt,J as gr,K as jr,M as Xt,N as vr,O as yr,Q as es,W as ts,X as br,Y as ss,Z as rs,_ as wr,$ as Nr,a0 as Cr,a1 as as,a2 as Sr,a3 as kr,a4 as ns,a5 as os,a6 as Ir,a7 as ls,a8 as is,a9 as cs,aa as Rr,ab as Tr,ac as Er,ad as Ar,ae as ds,af as Je,ag as Pr,ah as ms,ai as mt,aj as Ze,ak as us,al as at,am as Dr}from"./ui-vendor-Bcq-JzCk.js";import{a as Ur,r as o}from"./react-vendor-DwTemvTH.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(n){if(n.ep)return;n.ep=!0;const l=r(n);fetch(n.href,l)}})();var hs,Ct=Ur;hs=Ct.createRoot,Ct.hydrateRoot;function xs(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(r=xs(t[s]))&&(a&&(a+=" "),a+=r)}else for(r in t)t[r]&&(a&&(a+=" "),a+=r);return a}function _r(){for(var t,s,r=0,a="",n=arguments.length;r<n;r++)(t=arguments[r])&&(s=xs(t))&&(a&&(a+=" "),a+=s);return a}const xt="-",Mr=t=>{const s=Fr(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=t;return{getClassGroupId:m=>{const i=m.split(xt);return i[0]===""&&i.length!==1&&i.shift(),ps(i,s)||zr(m)},getConflictingClassGroupIds:(m,i)=>{const x=r[m]||[];return i&&a[m]?[...x,...a[m]]:x}}},ps=(t,s)=>{var m;if(t.length===0)return s.classGroupId;const r=t[0],a=s.nextPart.get(r),n=a?ps(t.slice(1),a):void 0;if(n)return n;if(s.validators.length===0)return;const l=t.join(xt);return(m=s.validators.find(({validator:i})=>i(l)))==null?void 0:m.classGroupId},St=/^\[(.+)\]$/,zr=t=>{if(St.test(t)){const s=St.exec(t)[1],r=s==null?void 0:s.substring(0,s.indexOf(":"));if(r)return"arbitrary.."+r}},Fr=t=>{const{theme:s,prefix:r}=t,a={nextPart:new Map,validators:[]};return Lr(Object.entries(t.classGroups),r).forEach(([l,m])=>{ut(m,a,l,s)}),a},ut=(t,s,r,a)=>{t.forEach(n=>{if(typeof n=="string"){const l=n===""?s:kt(s,n);l.classGroupId=r;return}if(typeof n=="function"){if(Or(n)){ut(n(a),s,r,a);return}s.validators.push({validator:n,classGroupId:r});return}Object.entries(n).forEach(([l,m])=>{ut(m,kt(s,l),r,a)})})},kt=(t,s)=>{let r=t;return s.split(xt).forEach(a=>{r.nextPart.has(a)||r.nextPart.set(a,{nextPart:new Map,validators:[]}),r=r.nextPart.get(a)}),r},Or=t=>t.isThemeGetter,Lr=(t,s)=>s?t.map(([r,a])=>{const n=a.map(l=>typeof l=="string"?s+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([m,i])=>[s+m,i])):l);return[r,n]}):t,$r=t=>{if(t<1)return{get:()=>{},set:()=>{}};let s=0,r=new Map,a=new Map;const n=(l,m)=>{r.set(l,m),s++,s>t&&(s=0,a=r,r=new Map)};return{get(l){let m=r.get(l);if(m!==void 0)return m;if((m=a.get(l))!==void 0)return n(l,m),m},set(l,m){r.has(l)?r.set(l,m):n(l,m)}}},fs="!",qr=t=>{const{separator:s,experimentalParseClassName:r}=t,a=s.length===1,n=s[0],l=s.length,m=i=>{const x=[];let u=0,d=0,y;for(let p=0;p<i.length;p++){let C=i[p];if(u===0){if(C===n&&(a||i.slice(p,p+l)===s)){x.push(i.slice(d,p)),d=p+l;continue}if(C==="/"){y=p;continue}}C==="["?u++:C==="]"&&u--}const j=x.length===0?i:i.substring(d),_=j.startsWith(fs),R=_?j.substring(1):j,v=y&&y>d?y-d:void 0;return{modifiers:x,hasImportantModifier:_,baseClassName:R,maybePostfixModifierPosition:v}};return r?i=>r({className:i,parseClassName:m}):m},Vr=t=>{if(t.length<=1)return t;const s=[];let r=[];return t.forEach(a=>{a[0]==="["?(s.push(...r.sort(),a),r=[]):r.push(a)}),s.push(...r.sort()),s},Br=t=>({cache:$r(t.cacheSize),parseClassName:qr(t),...Mr(t)}),Qr=/\s+/,Gr=(t,s)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:n}=s,l=[],m=t.trim().split(Qr);let i="";for(let x=m.length-1;x>=0;x-=1){const u=m[x],{modifiers:d,hasImportantModifier:y,baseClassName:j,maybePostfixModifierPosition:_}=r(u);let R=!!_,v=a(R?j.substring(0,_):j);if(!v){if(!R){i=u+(i.length>0?" "+i:i);continue}if(v=a(j),!v){i=u+(i.length>0?" "+i:i);continue}R=!1}const p=Vr(d).join(":"),C=y?p+fs:p,c=C+v;if(l.includes(c))continue;l.push(c);const E=n(v,R);for(let g=0;g<E.length;++g){const D=E[g];l.push(C+D)}i=u+(i.length>0?" "+i:i)}return i};function Hr(){let t=0,s,r,a="";for(;t<arguments.length;)(s=arguments[t++])&&(r=gs(s))&&(a&&(a+=" "),a+=r);return a}const gs=t=>{if(typeof t=="string")return t;let s,r="";for(let a=0;a<t.length;a++)t[a]&&(s=gs(t[a]))&&(r&&(r+=" "),r+=s);return r};function Wr(t,...s){let r,a,n,l=m;function m(x){const u=s.reduce((d,y)=>y(d),t());return r=Br(u),a=r.cache.get,n=r.cache.set,l=i,i(x)}function i(x){const u=a(x);if(u)return u;const d=Gr(x,r);return n(x,d),d}return function(){return l(Hr.apply(null,arguments))}}const Q=t=>{const s=r=>r[t]||[];return s.isThemeGetter=!0,s},js=/^\[(?:([a-z-]+):)?(.+)\]$/i,Yr=/^\d+\/\d+$/,Kr=new Set(["px","full","screen"]),Zr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Jr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Xr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ea=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ta=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ue=t=>_e(t)||Kr.has(t)||Yr.test(t),ge=t=>Oe(t,"length",ca),_e=t=>!!t&&!Number.isNaN(Number(t)),nt=t=>Oe(t,"number",_e),$e=t=>!!t&&Number.isInteger(Number(t)),sa=t=>t.endsWith("%")&&_e(t.slice(0,-1)),P=t=>js.test(t),je=t=>Zr.test(t),ra=new Set(["length","size","percentage"]),aa=t=>Oe(t,ra,vs),na=t=>Oe(t,"position",vs),oa=new Set(["image","url"]),la=t=>Oe(t,oa,ma),ia=t=>Oe(t,"",da),qe=()=>!0,Oe=(t,s,r)=>{const a=js.exec(t);return a?a[1]?typeof s=="string"?a[1]===s:s.has(a[1]):r(a[2]):!1},ca=t=>Jr.test(t)&&!Xr.test(t),vs=()=>!1,da=t=>ea.test(t),ma=t=>ta.test(t),ua=()=>{const t=Q("colors"),s=Q("spacing"),r=Q("blur"),a=Q("brightness"),n=Q("borderColor"),l=Q("borderRadius"),m=Q("borderSpacing"),i=Q("borderWidth"),x=Q("contrast"),u=Q("grayscale"),d=Q("hueRotate"),y=Q("invert"),j=Q("gap"),_=Q("gradientColorStops"),R=Q("gradientColorStopPositions"),v=Q("inset"),p=Q("margin"),C=Q("opacity"),c=Q("padding"),E=Q("saturate"),g=Q("scale"),D=Q("sepia"),O=Q("skew"),ne=Q("space"),oe=Q("translate"),le=()=>["auto","contain","none"],te=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",P,s],M=()=>[P,s],b=()=>["",ue,ge],N=()=>["auto",_e,P],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],H=()=>["solid","dashed","dotted","double","none"],h=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],T=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",P],A=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[_e,P];return{cacheSize:500,separator:":",theme:{colors:[qe],spacing:[ue,ge],blur:["none","",je,P],brightness:B(),borderColor:[t],borderRadius:["none","","full",je,P],borderSpacing:M(),borderWidth:b(),contrast:B(),grayscale:z(),hueRotate:B(),invert:z(),gap:M(),gradientColorStops:[t],gradientColorStopPositions:[sa,ge],inset:ie(),margin:ie(),opacity:B(),padding:M(),saturate:B(),scale:B(),sepia:z(),skew:B(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",P]}],container:["container"],columns:[{columns:[je]}],"break-after":[{"break-after":A()}],"break-before":[{"break-before":A()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),P]}],overflow:[{overflow:te()}],"overflow-x":[{"overflow-x":te()}],"overflow-y":[{"overflow-y":te()}],overscroll:[{overscroll:le()}],"overscroll-x":[{"overscroll-x":le()}],"overscroll-y":[{"overscroll-y":le()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",$e,P]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",P]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",$e,P]}],"grid-cols":[{"grid-cols":[qe]}],"col-start-end":[{col:["auto",{span:["full",$e,P]},P]}],"col-start":[{"col-start":N()}],"col-end":[{"col-end":N()}],"grid-rows":[{"grid-rows":[qe]}],"row-start-end":[{row:["auto",{span:[$e,P]},P]}],"row-start":[{"row-start":N()}],"row-end":[{"row-end":N()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",P]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",P]}],gap:[{gap:[j]}],"gap-x":[{"gap-x":[j]}],"gap-y":[{"gap-y":[j]}],"justify-content":[{justify:["normal",...T()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...T(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...T(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[c]}],px:[{px:[c]}],py:[{py:[c]}],ps:[{ps:[c]}],pe:[{pe:[c]}],pt:[{pt:[c]}],pr:[{pr:[c]}],pb:[{pb:[c]}],pl:[{pl:[c]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[ne]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ne]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",P,s]}],"min-w":[{"min-w":[P,s,"min","max","fit"]}],"max-w":[{"max-w":[P,s,"none","full","min","max","fit","prose",{screen:[je]},je]}],h:[{h:[P,s,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[P,s,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[P,s,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[P,s,"auto","min","max","fit"]}],"font-size":[{text:["base",je,ge]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nt]}],"font-family":[{font:[qe]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",P]}],"line-clamp":[{"line-clamp":["none",_e,nt]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ue,P]}],"list-image":[{"list-image":["none",P]}],"list-style-type":[{list:["none","disc","decimal",P]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...H(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ue,ge]}],"underline-offset":[{"underline-offset":["auto",ue,P]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",P]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",P]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),na]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aa]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},la]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[R]}],"gradient-via-pos":[{via:[R]}],"gradient-to-pos":[{to:[R]}],"gradient-from":[{from:[_]}],"gradient-via":[{via:[_]}],"gradient-to":[{to:[_]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...H(),"hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:H()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...H()]}],"outline-offset":[{"outline-offset":[ue,P]}],"outline-w":[{outline:[ue,ge]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:b()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[ue,ge]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",je,ia]}],"shadow-color":[{shadow:[qe]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...h(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":h()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[a]}],contrast:[{contrast:[x]}],"drop-shadow":[{"drop-shadow":["","none",je,P]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[y]}],saturate:[{saturate:[E]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[x]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[y]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",P]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",P]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",P]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[g]}],"scale-x":[{"scale-x":[g]}],"scale-y":[{"scale-y":[g]}],rotate:[{rotate:[$e,P]}],"translate-x":[{"translate-x":[oe]}],"translate-y":[{"translate-y":[oe]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",P]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",P]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",P]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ue,ge,nt]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},ha=Wr(ua),xa="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let pa=(t=21)=>{let s="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=xa[r[t]&63];return s};function w(...t){return ha(_r(t))}function Ce(t=""){return`${t}${pa()}`}function re(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}function fa(t){return t.trim().replace(/^["']|["']$/g,"")}function It(t,s){const r=new Date(`1970-01-01T${t}`),a=new Date(`1970-01-01T${s}`);return a<r&&a.setDate(a.getDate()+1),((a.getTime()-r.getTime())/(1e3*60*60)).toFixed(2)}function Pe(t){const[s,r]=t.split(":"),a=parseInt(s),n=a>=12?"PM":"AM";return`${a%12||12}:${r} ${n}`}function ot(t){return t.reduce((s,r)=>s+r.cost*r.quantitySold,0)}function lt(t,s){return t-s}function ke(t,s,r,a){return{id:Ce("change-"),date:new Date().toISOString(),type:t,items:s,user:r,details:a}}const se={INVENTORY:"cardquant_inventory",STREAMS:"cardquant_streams",INVENTORY_CHECKS:"cardquant_checks",INVENTORY_CHANGES:"cardquant_changes",CATEGORIES:"cardquant_categories",USERS:"cardquant_users",CURRENT_USER:"cardquant_current_user"},ga=(t,s)=>{try{return localStorage.setItem(t,JSON.stringify(s)),s}catch(r){return console.error(`Error syncing data for key ${t}:`,r),s}},Rt=(t,s)=>{try{const r=localStorage.getItem(t);return r?JSON.parse(r):s}catch(r){return console.error(`Error loading data for key ${t}:`,r),s}};class De{constructor(){this.cache=new Map,this.initializeCache()}static getInstance(){return De.instance||(De.instance=new De),De.instance}initializeCache(){Object.values(se).forEach(s=>{const r=Rt(s,null);r&&this.cache.set(s,r)})}getFromCache(s,r){if(!this.cache.has(s)){const a=Rt(s,r);this.cache.set(s,a)}return this.cache.get(s)}setInCache(s,r){return this.cache.set(s,r),ga(s,r)}saveInventory(s){this.setInCache(se.INVENTORY,s)}loadInventory(s){return this.getFromCache(se.INVENTORY,s)}saveStreams(s){this.setInCache(se.STREAMS,s)}loadStreams(s){return this.getFromCache(se.STREAMS,s)}saveInventoryChecks(s){this.setInCache(se.INVENTORY_CHECKS,s)}loadInventoryChecks(s){return this.getFromCache(se.INVENTORY_CHECKS,s)}saveInventoryChanges(s){this.setInCache(se.INVENTORY_CHANGES,s)}loadInventoryChanges(s){return this.getFromCache(se.INVENTORY_CHANGES,s)}saveCategories(s){this.setInCache(se.CATEGORIES,s)}loadCategories(s){return this.getFromCache(se.CATEGORIES,s)}saveUsers(s){this.setInCache(se.USERS,s)}loadUsers(s){return this.getFromCache(se.USERS,s)}saveCurrentUser(s){this.setInCache(se.CURRENT_USER,s)}loadCurrentUser(){return this.getFromCache(se.CURRENT_USER,null)}clearAll(){this.cache.clear(),Object.values(se).forEach(s=>{localStorage.removeItem(s)})}}const W=De.getInstance(),Ie={admin:["view","edit","delete","manage_users","view_costs","view_all_streams","view_own_streams","add_stream","edit_stream","delete_stream","manage_inventory","view_inventory","edit_inventory","delete_inventory","perform_inventory_check","view_reports","export_data"],manager:["view","edit","view_costs","view_all_streams","add_stream","edit_stream","view_inventory","edit_inventory","perform_inventory_check","view_reports"],streamer:["view_own_streams","add_stream","view_inventory"]},Ue=[{id:"admin-demo",email:"admin@example.com",password:"admin123",role:"admin",name:"Admin User",emailVerified:!0,permissions:Ie.admin},{id:"manager-demo",email:"manager@example.com",password:"manager123",role:"manager",name:"Manager User",emailVerified:!0,permissions:Ie.manager},{id:"streamer1-demo",email:"streamer1@example.com",password:"streamer123",role:"streamer",name:"John Streamer",emailVerified:!0,streamerId:"str-1",permissions:Ie.streamer},{id:"streamer2-demo",email:"streamer2@example.com",password:"streamer123",role:"streamer",name:"Jane Streamer",emailVerified:!0,streamerId:"str-2",permissions:Ie.streamer}],ja=()=>{try{const t=W.loadUsers(Ue),s=Ue.map(n=>n.email),r=t.filter(n=>!s.includes(n.email)),a=[...Ue,...r];return W.saveUsers(a),a}catch(t){return console.error("Error loading users:",t),Ue}};let Me=ja();const ht=t=>{const s=Ue.map(a=>a.email),r=t.filter(a=>!s.includes(a.email));Me=[...Ue,...r],W.saveUsers(Me)};function et(t,s){return!t||!t.emailVerified?!1:t.permissions.includes(s)}const Xe=new Map;function va(t){const s=Ce("verify-");return Xe.set(s,{email:t,expires:Date.now()+24*60*60*1e3}),s}function ya(t){const s=Xe.get(t);return s?s.expires<Date.now()?(Xe.delete(t),null):(Xe.delete(t),s.email):null}const ys=o.createContext(void 0);function ba({children:t}){const[s,r]=o.useState(()=>W.loadCurrentUser());o.useEffect(()=>{const i=W.loadUsers(Me);ht(i)},[]);const a=async(i,x)=>{const u=Me.find(d=>d.email===i&&d.password===x);if(!u)throw new Error("Invalid credentials");if(!u.emailVerified)throw new Error("Please verify your email before logging in");r(u),W.saveCurrentUser(u)},n=()=>{r(null),W.saveCurrentUser(null)},l=async i=>{const x=va(i);console.log(`Verification link: /verify-email?token=${x}`),await new Promise(u=>setTimeout(u,1e3))},m=async i=>{const x=ya(i);if(!x)throw new Error("Invalid or expired verification token");const u=Me.map(d=>d.email===x?{...d,emailVerified:!0}:d);ht(u),W.saveUsers(u)};return e.jsx(ys.Provider,{value:{user:s,login:a,logout:n,isAuthenticated:!!s,sendVerificationEmail:l,verifyEmail:m},children:t})}function Ee(){const t=o.useContext(ys);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const wa=o.createContext(void 0);function Na({children:t}){const[s,r]=o.useState(()=>{if(typeof window<"u")try{const a=localStorage.getItem("theme");if(a)return a;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}catch{}return"dark"});return o.useEffect(()=>{const a=window.document.documentElement;a.classList.remove("light","dark"),a.classList.add(s);try{localStorage.setItem("theme",s)}catch{}},[s]),e.jsx(wa.Provider,{value:{theme:s,setTheme:r},children:t})}function bs(t){var s,r,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(r=bs(t[s]))&&(a&&(a+=" "),a+=r);else for(s in t)t[s]&&(a&&(a+=" "),a+=s);return a}function Ca(){for(var t,s,r=0,a="";r<arguments.length;)(t=arguments[r++])&&(s=bs(t))&&(a&&(a+=" "),a+=s);return a}const Tt=t=>typeof t=="boolean"?"".concat(t):t===0?"0":t,Et=Ca,pt=(t,s)=>r=>{var a;if((s==null?void 0:s.variants)==null)return Et(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:n,defaultVariants:l}=s,m=Object.keys(n).map(u=>{const d=r==null?void 0:r[u],y=l==null?void 0:l[u];if(d===null)return null;const j=Tt(d)||Tt(y);return n[u][j]}),i=r&&Object.entries(r).reduce((u,d)=>{let[y,j]=d;return j===void 0||(u[y]=j),u},{}),x=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((u,d)=>{let{class:y,className:j,..._}=d;return Object.entries(_).every(R=>{let[v,p]=R;return Array.isArray(p)?p.includes({...l,...i}[v]):{...l,...i}[v]===p})?[...u,y,j]:u},[]);return Et(t,m,x,r==null?void 0:r.class,r==null?void 0:r.className)},Sa=pt("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),I=o.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},l)=>{const m=a?Xs:"button";return e.jsx(m,{className:w(Sa({variant:s,size:r,className:t})),ref:l,...n})});I.displayName="Button";function Ae(t,s){if(t==null)return{};var r={},a=Object.keys(t),n,l;for(l=0;l<a.length;l++)n=a[l],!(s.indexOf(n)>=0)&&(r[n]=t[n]);return r}var ka=["color"],Ia=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,ka);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),Ra=["color"],ft=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,Ra);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),Ta=["color"],Ea=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,Ta);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),Aa=["color"],Pa=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,Aa);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),Da=["color"],Ua=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,Da);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),_a=["color"],Ma=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,_a);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:a,fillRule:"evenodd",clipRule:"evenodd"}))}),za=["color"],Fa=o.forwardRef(function(t,s){var r=t.color,a=r===void 0?"currentColor":r,n=Ae(t,za);return o.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n,{ref:s}),o.createElement("path",{d:"M9.875 7.5C9.875 8.81168 8.81168 9.875 7.5 9.875C6.18832 9.875 5.125 8.81168 5.125 7.5C5.125 6.18832 6.18832 5.125 7.5 5.125C8.81168 5.125 9.875 6.18832 9.875 7.5Z",fill:a}))});const Oa=tr,La=sr,$a=o.forwardRef(({className:t,inset:s,children:r,...a},n)=>e.jsxs(Pt,{ref:n,className:w("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...a,children:[r,e.jsx(Pa,{className:"ml-auto h-4 w-4"})]}));$a.displayName=Pt.displayName;const qa=o.forwardRef(({className:t,...s},r)=>e.jsx(Dt,{ref:r,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));qa.displayName=Dt.displayName;const ws=o.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(er,{children:e.jsx(Ut,{ref:a,sideOffset:s,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));ws.displayName=Ut.displayName;const Ns=o.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(_t,{ref:a,className:w("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...r}));Ns.displayName=_t.displayName;const Va=o.forwardRef(({className:t,children:s,checked:r,...a},n)=>e.jsxs(Mt,{ref:n,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(zt,{children:e.jsx(ft,{className:"h-4 w-4"})})}),s]}));Va.displayName=Mt.displayName;const Ba=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Ft,{ref:a,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(zt,{children:e.jsx(Fa,{className:"h-4 w-4 fill-current"})})}),s]}));Ba.displayName=Ft.displayName;const Qa=o.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(Ot,{ref:a,className:w("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));Qa.displayName=Ot.displayName;const Ga=o.forwardRef(({className:t,...s},r)=>e.jsx(Lt,{ref:r,className:w("-mx-1 my-1 h-px bg-muted",t),...s}));Ga.displayName=Lt.displayName;const Ha=[{name:"Cyber Blue",primary:"230 100% 65%",secondary:"230 25% 15%",accent:"230 100% 65%"},{name:"Neo Purple",primary:"270 100% 65%",secondary:"270 25% 15%",accent:"270 100% 65%"},{name:"Matrix Green",primary:"135 100% 65%",secondary:"135 25% 15%",accent:"135 100% 65%"},{name:"Crimson Edge",primary:"350 100% 65%",secondary:"350 25% 15%",accent:"350 100% 65%"},{name:"Gold Rush",primary:"45 100% 65%",secondary:"45 25% 15%",accent:"45 100% 65%"},{name:"Monochrome",primary:"0 0% 95%",secondary:"0 0% 15%",accent:"0 0% 85%"}];function Wa(){const t=s=>{const r=document.documentElement;r.style.setProperty("--primary",s.primary),r.style.setProperty("--secondary",s.secondary),r.style.setProperty("--accent",s.accent)};return e.jsxs(Oa,{children:[e.jsx(La,{asChild:!0,children:e.jsx(I,{variant:"outline",size:"icon",className:"w-10 h-10 rounded-full",children:e.jsx(rr,{className:"h-5 w-5"})})}),e.jsx(ws,{align:"end",children:Ha.map(s=>e.jsxs(Ns,{onClick:()=>t(s),className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("div",{className:"w-4 h-4 rounded-full",style:{background:`hsl(${s.primary})`}}),s.name]},s.name))})]})}var Ya="Separator",At="horizontal",Ka=["horizontal","vertical"],Cs=o.forwardRef((t,s)=>{const{decorative:r,orientation:a=At,...n}=t,l=Za(a)?a:At,i=r?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(Fe.div,{"data-orientation":l,...i,...n,ref:s})});Cs.displayName=Ya;function Za(t){return Ka.includes(t)}var Ss=Cs;const ks=o.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...a},n)=>e.jsx(Ss,{ref:n,decorative:r,orientation:s,className:w("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...a}));ks.displayName=Ss.displayName;function Ve({icon:t,label:s,onClick:r,active:a}){return e.jsxs("button",{onClick:r,className:w("w-full flex items-center gap-3 px-3 py-2 rounded-lg text-sm transition-colors","hover:bg-accent hover:text-accent-foreground",a&&"bg-accent text-accent-foreground"),children:[t,e.jsx("span",{className:"flex-1 text-left",children:s}),e.jsx(cr,{className:w("h-4 w-4 transition-transform",a&&"transform rotate-90")})]})}function Ja({children:t,currentView:s,onViewChange:r}){var i;const{user:a,logout:n,isAuthenticated:l}=Ee();if(!l)return t;const m=et(a,"manage_users");return e.jsxs("div",{className:"min-h-screen bg-background flex",children:[e.jsxs("div",{className:"w-64 border-r border-border/40 flex flex-col",children:[e.jsx("div",{className:"h-16 flex items-center px-6 border-b border-border/40",children:e.jsx("h1",{className:"brand-title text-2xl",children:"CardQuant"})}),e.jsxs("div",{className:"flex-1 px-3 py-4 space-y-2",children:[e.jsx(Ve,{icon:e.jsx(ar,{className:"h-4 w-4"}),label:"Dashboard",onClick:()=>r("dashboard"),active:s==="dashboard"}),e.jsx(Ve,{icon:e.jsx(nr,{className:"h-4 w-4"}),label:"Inventory",onClick:()=>r("inventory"),active:s==="inventory"}),e.jsx(Ve,{icon:e.jsx(or,{className:"h-4 w-4"}),label:"Streams",onClick:()=>r("streams"),active:s==="streams"}),e.jsx(Ve,{icon:e.jsx($t,{className:"h-4 w-4"}),label:"Inventory Check",onClick:()=>r("inventoryCheck"),active:s==="inventoryCheck"}),m&&e.jsx(Ve,{icon:e.jsx(lr,{className:"h-4 w-4"}),label:"User Management",onClick:()=>r("users"),active:s==="users"})]}),e.jsxs("div",{className:"p-4 border-t border-border/40 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium",children:(i=a==null?void 0:a.name)==null?void 0:i.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:a==null?void 0:a.name}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a==null?void 0:a.role})]})]}),e.jsx(Wa,{})]}),e.jsx(ks,{}),e.jsxs(I,{variant:"ghost",size:"sm",onClick:n,className:"w-full text-muted-foreground hover:text-foreground",children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col min-h-screen",children:e.jsx("main",{className:"flex-1 py-8 px-8",children:e.jsxs("div",{className:"relative max-w-6xl mx-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-accent/5 to-primary/5 blur-3xl opacity-20"}),e.jsx("div",{className:"relative",children:t})]})})})]})}const Y=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:w("rounded-xl border bg-card text-card-foreground shadow",t),...s}));Y.displayName="Card";const X=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:w("flex flex-col space-y-1.5 p-6",t),...s}));X.displayName="CardHeader";const ee=o.forwardRef(({className:t,...s},r)=>e.jsx("h3",{ref:r,className:w("font-semibold leading-none tracking-tight",t),...s}));ee.displayName="CardTitle";const Be=o.forwardRef(({className:t,...s},r)=>e.jsx("p",{ref:r,className:w("text-sm text-muted-foreground",t),...s}));Be.displayName="CardDescription";const K=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:w("p-6 pt-0",t),...s}));K.displayName="CardContent";const Xa=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:w("flex items-center p-6 pt-0",t),...s}));Xa.displayName="CardFooter";const V=o.forwardRef(({className:t,type:s,...r},a)=>e.jsx("input",{type:s,className:w("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r}));V.displayName="Input";const en=pt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),q=o.forwardRef(({className:t,...s},r)=>e.jsx(qt,{ref:r,className:w(en(),t),...s}));q.displayName=qt.displayName;const tn=pt("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ge=o.forwardRef(({className:t,variant:s,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:w(tn({variant:s}),t),...r}));Ge.displayName="Alert";const tt=o.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:w("mb-1 font-medium leading-none tracking-tight",t),...s}));tt.displayName="AlertTitle";const He=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:w("text-sm [&_p]:leading-relaxed",t),...s}));He.displayName="AlertDescription";function sn(){const{login:t,sendVerificationEmail:s}=Ee(),[r,a]=o.useState(""),[n,l]=o.useState(""),[m,i]=o.useState(""),[x,u]=o.useState(!1),[d,y]=o.useState(!1),j=async R=>{R.preventDefault(),i(""),u(!0);try{await t(r,n)}catch(v){const p=v instanceof Error?v.message:"Login failed";i(p),p.includes("verify your email")&&y(!0)}finally{u(!1)}},_=async()=>{try{u(!0),await s(r),i("Verification email sent! Please check your inbox.")}catch{i("Failed to send verification email")}finally{u(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background",children:e.jsxs(Y,{className:"w-full max-w-md mx-4",children:[e.jsx(X,{className:"space-y-6 text-center pb-12",children:e.jsxs("div",{children:[e.jsx("h1",{className:"brand-title text-5xl mb-3",children:"CardQuant"}),e.jsx("p",{className:"text-muted-foreground",children:"Inventory Management System"})]})}),e.jsxs(K,{children:[e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[m&&e.jsx(Ge,{variant:d?"warning":"destructive",children:e.jsxs(He,{children:[m,d&&e.jsx(I,{variant:"link",className:"ml-2",onClick:_,disabled:x,children:"Resend verification email"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Email"}),e.jsx(V,{id:"email",type:"email",value:r,onChange:R=>a(R.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"password",children:"Password"}),e.jsx(V,{id:"password",type:"password",value:n,onChange:R=>l(R.target.value),required:!0})]}),e.jsx(I,{type:"submit",className:"w-full",disabled:x,children:x?"Please wait...":"Login"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-border/50",children:[e.jsx("p",{className:"text-center text-sm text-muted-foreground mb-2",children:"Demo Accounts:"}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Admin: admin@example.com / admin123"}),e.jsx("p",{children:"Manager: manager@example.com / manager123"}),e.jsx("p",{children:"Streamer: streamer1@example.com / streamer123"})]})]})]})]})})}function rn({totalValue:t,totalStreams:s}){const r=new Date;return r.setDate(r.getDate()-30),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(Y,{className:"stats-card overflow-hidden",children:[e.jsxs(X,{className:"stats-header",children:[e.jsx(ee,{className:"text-lg font-medium text-white",children:"Total Inventory Value"}),e.jsx(dr,{className:"h-6 w-6 text-white/90"})]}),e.jsxs(K,{className:"stats-content",children:[e.jsx("div",{className:"text-4xl font-light tracking-tight",children:t}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Current portfolio value"})]})]}),e.jsxs(Y,{className:"stats-card overflow-hidden",children:[e.jsxs(X,{className:"stats-header",children:[e.jsx(ee,{className:"text-lg font-medium text-white",children:"Recent Sales"}),e.jsx(mr,{className:"h-6 w-6 text-white/90"})]}),e.jsxs(K,{className:"stats-content",children:[e.jsxs("div",{className:"text-4xl font-light tracking-tight",children:[s," streams"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total streams completed"})]})]})]})}var gt="Checkbox",[an,Un]=Vt(gt),[nn,on]=an(gt),Is=o.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:l,required:m,disabled:i,value:x="on",onCheckedChange:u,form:d,...y}=t,[j,_]=o.useState(null),R=Bt(s,g=>_(g)),v=o.useRef(!1),p=j?d||!!j.closest("form"):!0,[C=!1,c]=Qt({prop:n,defaultProp:l,onChange:u}),E=o.useRef(C);return o.useEffect(()=>{const g=j==null?void 0:j.form;if(g){const D=()=>c(E.current);return g.addEventListener("reset",D),()=>g.removeEventListener("reset",D)}},[j,c]),e.jsxs(nn,{scope:r,state:C,disabled:i,children:[e.jsx(Fe.button,{type:"button",role:"checkbox","aria-checked":be(C)?"mixed":C,"aria-required":m,"data-state":Es(C),"data-disabled":i?"":void 0,disabled:i,value:x,...y,ref:R,onKeyDown:dt(t.onKeyDown,g=>{g.key==="Enter"&&g.preventDefault()}),onClick:dt(t.onClick,g=>{c(D=>be(D)?!0:!D),p&&(v.current=g.isPropagationStopped(),v.current||g.stopPropagation())})}),p&&e.jsx(ln,{control:j,bubbles:!v.current,name:a,value:x,checked:C,required:m,disabled:i,form:d,style:{transform:"translateX(-100%)"},defaultChecked:be(l)?!1:l})]})});Is.displayName=gt;var Rs="CheckboxIndicator",Ts=o.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:a,...n}=t,l=on(Rs,r);return e.jsx(Gt,{present:a||be(l.state)||l.state===!0,children:e.jsx(Fe.span,{"data-state":Es(l.state),"data-disabled":l.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});Ts.displayName=Rs;var ln=t=>{const{control:s,checked:r,bubbles:a=!0,defaultChecked:n,...l}=t,m=o.useRef(null),i=ur(r),x=hr(s);o.useEffect(()=>{const d=m.current,y=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(y,"checked").set;if(i!==r&&_){const R=new Event("click",{bubbles:a});d.indeterminate=be(r),_.call(d,be(r)?!1:r),d.dispatchEvent(R)}},[i,r,a]);const u=o.useRef(be(r)?!1:r);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??u.current,...l,tabIndex:-1,ref:m,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function be(t){return t==="indeterminate"}function Es(t){return be(t)?"indeterminate":t?"checked":"unchecked"}var As=Is,cn=Ts;const Qe=o.forwardRef(({className:t,...s},r)=>e.jsx(As,{ref:r,className:w("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(cn,{className:w("flex items-center justify-center text-current"),children:e.jsx(ft,{className:"h-4 w-4"})})}));Qe.displayName=As.displayName;const Re=vr,Te=yr,we=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Ht,{ref:a,className:w("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[s,e.jsx(xr,{asChild:!0,children:e.jsx(Ia,{className:"h-4 w-4 opacity-50"})})]}));we.displayName=Ht.displayName;const Ps=o.forwardRef(({className:t,...s},r)=>e.jsx(Wt,{ref:r,className:w("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ua,{})}));Ps.displayName=Wt.displayName;const Ds=o.forwardRef(({className:t,...s},r)=>e.jsx(Yt,{ref:r,className:w("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ea,{})}));Ds.displayName=Yt.displayName;const Ne=o.forwardRef(({className:t,children:s,position:r="popper",...a},n)=>e.jsx(pr,{children:e.jsxs(Kt,{ref:n,className:w("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(Ps,{}),e.jsx(fr,{className:w("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Ds,{})]})}));Ne.displayName=Kt.displayName;const dn=o.forwardRef(({className:t,...s},r)=>e.jsx(Zt,{ref:r,className:w("px-2 py-1.5 text-sm font-semibold",t),...s}));dn.displayName=Zt.displayName;const ae=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Jt,{ref:a,className:w("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(gr,{children:e.jsx(ft,{className:"h-4 w-4"})})}),e.jsx(jr,{children:s})]}));ae.displayName=Jt.displayName;const mn=o.forwardRef(({className:t,...s},r)=>e.jsx(Xt,{ref:r,className:w("-mx-1 my-1 h-px bg-muted",t),...s}));mn.displayName=Xt.displayName;const ve=Nr,un=Cr,hn=wr,Us=o.forwardRef(({className:t,...s},r)=>e.jsx(es,{ref:r,className:w("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Us.displayName=es.displayName;const he=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(hn,{children:[e.jsx(Us,{}),e.jsxs(ts,{ref:a,className:w("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r,children:[s,e.jsxs(br,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Ma,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));he.displayName=ts.displayName;const xe=({className:t,...s})=>e.jsx("div",{className:w("flex flex-col space-y-1.5 text-center sm:text-left",t),...s});xe.displayName="DialogHeader";const ye=({className:t,...s})=>e.jsx("div",{className:w("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});ye.displayName="DialogFooter";const pe=o.forwardRef(({className:t,...s},r)=>e.jsx(ss,{ref:r,className:w("text-lg font-semibold leading-none tracking-tight",t),...s}));pe.displayName=ss.displayName;const ze=o.forwardRef(({className:t,...s},r)=>e.jsx(rs,{ref:r,className:w("text-sm text-muted-foreground",t),...s}));ze.displayName=rs.displayName;const ce=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:w("w-full caption-bottom text-sm",t),...s})}));ce.displayName="Table";const de=o.forwardRef(({className:t,...s},r)=>e.jsx("thead",{ref:r,className:w("[&_tr]:border-b",t),...s}));de.displayName="TableHeader";const me=o.forwardRef(({className:t,...s},r)=>e.jsx("tbody",{ref:r,className:w("[&_tr:last-child]:border-0",t),...s}));me.displayName="TableBody";const xn=o.forwardRef(({className:t,...s},r)=>e.jsx("tfoot",{ref:r,className:w("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));xn.displayName="TableFooter";const J=o.forwardRef(({className:t,...s},r)=>e.jsx("tr",{ref:r,className:w("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));J.displayName="TableRow";const S=o.forwardRef(({className:t,...s},r)=>e.jsx("th",{ref:r,className:w("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));S.displayName="TableHead";const k=o.forwardRef(({className:t,...s},r)=>e.jsx("td",{ref:r,className:w("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s}));k.displayName="TableCell";const pn=o.forwardRef(({className:t,...s},r)=>e.jsx("caption",{ref:r,className:w("mt-4 text-sm text-muted-foreground",t),...s}));pn.displayName="TableCaption";const it={"General Access":["view","edit","delete"],"User Management":["manage_users"],Financial:["view_costs"],Streams:["view_all_streams","view_own_streams","add_stream","edit_stream","delete_stream"],Inventory:["manage_inventory","view_inventory","edit_inventory","delete_inventory","perform_inventory_check"],Reports:["view_reports","export_data"]},ct=t=>t.split("_").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ");function _s({users:t,onUpdateUsers:s}){const[r,a]=o.useState(!1),[n,l]=o.useState(null),[m,i]=o.useState(null),[x,u]=o.useState(null),[d,y]=o.useState({email:"",password:"",role:"streamer",name:"",emailVerified:!0,permissions:[]}),j=()=>{if(!d.email||!d.password||!d.name)return;const c={id:Ce("user-"),...d,permissions:d.permissions.length?d.permissions:Ie[d.role]};s([...t,c]),y({email:"",password:"",role:"streamer",name:"",emailVerified:!0,permissions:[]}),a(!1)},_=()=>{!n||!n.email||!n.name||(s(t.map(c=>c.id===n.id?n:c)),l(null))},R=c=>{s(t.filter(E=>E.id!==c)),u(null)},v=(c,E=!1)=>{E?y(g=>({...g,role:c,permissions:Ie[c]})):n&&l(g=>({...g,role:c,permissions:Ie[c]}))},p=(c,E,g)=>{const D=E?[...g.permissions,c]:g.permissions.filter(O=>O!==c);n&&g.id===n.id?l({...n,permissions:D}):s(t.map(O=>O.id===g.id?{...O,permissions:D}:O))},C=c=>e.jsx(ve,{open:m===c.id,onOpenChange:()=>i(null),children:e.jsxs(he,{className:"max-w-3xl",children:[e.jsxs(xe,{children:[e.jsxs(pe,{children:["Permissions for ",c.name]}),e.jsx(ze,{children:"Manage user permissions and access levels"})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(it).map(([E,g])=>e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:E}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map(D=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:`${c.id}-${D}`,checked:c.permissions.includes(D),onCheckedChange:O=>p(D,O,c)}),e.jsx(q,{htmlFor:`${c.id}-${D}`,children:ct(D)})]},D))})]},E))}),e.jsx(ye,{children:e.jsx(I,{onClick:()=>i(null),children:"Done"})})]})},`permissions-${c.id}`);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"User Management"}),e.jsxs(I,{onClick:()=>a(!0),children:[e.jsx(as,{className:"mr-2 h-4 w-4"})," Add User"]})]}),e.jsxs(Y,{className:"glass-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Users"})}),e.jsx(K,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Name"}),e.jsx(S,{children:"Email"}),e.jsx(S,{children:"Role"}),e.jsx(S,{children:"Actions"})]})}),e.jsx(me,{children:t.map(c=>e.jsxs(J,{children:[e.jsx(k,{children:c.name}),e.jsx(k,{children:c.email}),e.jsx(k,{className:"capitalize",children:c.role}),e.jsx(k,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{variant:"outline",size:"sm",onClick:()=>i(c.id),children:e.jsx(Sr,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>l(c),children:e.jsx(kr,{className:"h-4 w-4"})}),e.jsx(I,{variant:"outline",size:"sm",onClick:()=>u(c.id),children:e.jsx(ns,{className:"h-4 w-4"})})]})})]},c.id))})]})})]}),e.jsx(ve,{open:r,onOpenChange:a,children:e.jsxs(he,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Add New User"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"name",children:"Full Name"}),e.jsx(V,{id:"name",value:d.name,onChange:c=>y({...d,name:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"email",children:"Email"}),e.jsx(V,{id:"email",type:"email",value:d.email,onChange:c=>y({...d,email:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"password",children:"Password"}),e.jsx(V,{id:"password",type:"password",value:d.password,onChange:c=>y({...d,password:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"role",children:"Role"}),e.jsxs(Re,{value:d.role,onValueChange:c=>v(c,!0),children:[e.jsx(we,{children:e.jsx(Te,{placeholder:"Select role"})}),e.jsxs(Ne,{children:[e.jsx(ae,{value:"admin",children:"Admin"}),e.jsx(ae,{value:"manager",children:"Manager"}),e.jsx(ae,{value:"streamer",children:"Streamer"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{children:"Permissions"}),Object.entries(it).map(([c,E])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:c}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:`new-${g}`,checked:d.permissions.includes(g),onCheckedChange:D=>{const O=D?[...d.permissions,g]:d.permissions.filter(ne=>ne!==g);y({...d,permissions:O})}}),e.jsx(q,{htmlFor:`new-${g}`,children:ct(g)})]},g))})]},c))]})]}),e.jsxs(ye,{children:[e.jsx(I,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(I,{onClick:j,children:"Add User"})]})]})}),e.jsx(ve,{open:!!n,onOpenChange:c=>!c&&l(null),children:e.jsxs(he,{children:[e.jsx(xe,{children:e.jsx(pe,{children:"Edit User"})}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"edit-name",children:"Full Name"}),e.jsx(V,{id:"edit-name",value:n.name,onChange:c=>l({...n,name:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"edit-email",children:"Email"}),e.jsx(V,{id:"edit-email",type:"email",value:n.email,onChange:c=>l({...n,email:c.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"edit-password",children:"New Password (leave blank to keep current)"}),e.jsx(V,{id:"edit-password",type:"password",value:n.password,onChange:c=>l({...n,password:c.target.value}),placeholder:""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{htmlFor:"edit-role",children:"Role"}),e.jsxs(Re,{value:n.role,onValueChange:c=>v(c),children:[e.jsx(we,{children:e.jsx(Te,{})}),e.jsxs(Ne,{children:[e.jsx(ae,{value:"admin",children:"Admin"}),e.jsx(ae,{value:"manager",children:"Manager"}),e.jsx(ae,{value:"streamer",children:"Streamer"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{children:"Permissions"}),Object.entries(it).map(([c,E])=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:c}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(g=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Qe,{id:`edit-${g}`,checked:n.permissions.includes(g),onCheckedChange:D=>{p(g,D,n)}}),e.jsx(q,{htmlFor:`edit-${g}`,children:ct(g)})]},g))})]},c))]})]}),e.jsxs(ye,{children:[e.jsx(I,{variant:"outline",onClick:()=>l(null),children:"Cancel"}),e.jsx(I,{onClick:_,children:"Update User"})]})]})}),e.jsx(ve,{open:!!x,onOpenChange:c=>!c&&u(null),children:e.jsxs(he,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Delete User"}),e.jsx(ze,{children:"Are you sure you want to delete this user? This action cannot be undone."})]}),e.jsxs(ye,{children:[e.jsx(I,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),e.jsx(I,{variant:"destructive",onClick:()=>x&&R(x),children:"Delete"})]})]})}),t.map(c=>C(c))]})}function fn({totalValue:t,totalStreams:s,onViewChange:r,onStartInventoryCheck:a}){const{user:n}=Ee(),l=et(n,"manage_users");return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold tracking-tight mb-2",children:"Welcome back"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's an overview of your inventory management system."})]}),e.jsx(rn,{totalValue:t,totalStreams:s}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(Y,{className:"hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>r("inventory"),children:[e.jsxs(X,{children:[e.jsx(os,{className:"h-6 w-6 mb-2 text-primary"}),e.jsx(ee,{className:"text-xl font-semibold",children:"Inventory"}),e.jsx(Be,{children:"Manage your product catalog"})]}),e.jsx(K,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"View, add, edit, and organize your inventory items."})})]}),e.jsxs(Y,{className:"hover:border-primary/50 transition-colors cursor-pointer",onClick:()=>r("streams"),children:[e.jsxs(X,{children:[e.jsx(Ir,{className:"h-6 w-6 mb-2 text-primary"}),e.jsx(ee,{className:"text-xl font-semibold",children:"Streams"}),e.jsx(Be,{children:"Track your streaming sessions"})]}),e.jsx(K,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and manage your streaming activities."})})]}),e.jsxs(Y,{className:"hover:border-primary/50 transition-colors cursor-pointer",onClick:a,children:[e.jsxs(X,{children:[e.jsx($t,{className:"h-6 w-6 mb-2 text-primary"}),e.jsx(ee,{className:"text-xl font-semibold",children:"Inventory Check"}),e.jsx(Be,{children:"Verify your stock levels"})]}),e.jsx(K,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Perform inventory checks and reconciliation."})})]})]}),l&&e.jsx("div",{className:"mt-8",children:e.jsxs(Y,{className:"glass-card",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-xl font-semibold",children:"User Management"}),e.jsx(Be,{children:"Manage system access and permissions"})]}),e.jsx(K,{children:e.jsx(_s,{users:Me,onUpdateUsers:ht})})]})})]})}const Ms=Rr,jt=o.forwardRef(({className:t,...s},r)=>e.jsx(ls,{ref:r,className:w("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...s}));jt.displayName=ls.displayName;const We=o.forwardRef(({className:t,...s},r)=>e.jsx(is,{ref:r,className:w("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...s}));We.displayName=is.displayName;const Ye=o.forwardRef(({className:t,...s},r)=>e.jsx(cs,{ref:r,className:w("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Ye.displayName=cs.displayName;function gn({onUploadSuccess:t,onUploadError:s}){const r=n=>{try{const l=n.split(`
`).map(d=>d.trim()).filter(d=>d.length>0);if(l.length<2)throw new Error("CSV file must contain a header row and at least one data row");const m=l[0].toLowerCase().split(",").map(d=>d.trim()),i={name:["name","item name","product name","title","product"],quantity:["quantity","qty","amount","count","stock"],cost:["cost","price","cost per","unit price","price per unit","value"],category:["category","type","group","department"]},x={};for(const[d,y]of Object.entries(i)){const j=m.findIndex(_=>y.some(R=>_.includes(R)));if(j===-1)if(d==="category")x[d]=-1;else throw new Error(`Missing required column: ${d}. Acceptable headers: ${y.join(", ")}`);else x[d]=j}const u=l.slice(1).reduce((d,y)=>{const j=y.split(",").map(fa),_=j[x.name];if(!_)return d;let R=j[x.quantity].replace(/[^0-9.-]/g,"");const v=parseInt(R);if(isNaN(v))return d;let p=j[x.cost].replace(/[^0-9.-]/g,"");const C=parseFloat(p);if(isNaN(C)||C<=0)return d;const c=x.category>=0?j[x.category]:"Uncategorized";return d.push({id:Ce("inv-"),name:_,quantity:v,cost:C,category:c||"Uncategorized"}),d},[]);if(u.length===0)throw new Error("No valid items found in the CSV file");return u}catch(l){throw new Error(`Error parsing CSV: ${l instanceof Error?l.message:"Unknown error"}`)}},a=n=>{var i;const l=(i=n.target.files)==null?void 0:i[0];if(!l)return;if(!l.name.toLowerCase().endsWith(".csv")){s("Please upload a CSV file");return}const m=new FileReader;m.onload=x=>{var u;try{const d=(u=x.target)==null?void 0:u.result,y=r(d);t(y)}catch(d){s(d instanceof Error?d.message:"Error processing file")}},m.onerror=()=>{s("Error reading file")},m.readAsText(l)};return e.jsxs("div",{className:"space-y-4",children:[e.jsx(V,{type:"file",accept:".csv",onChange:a,className:"cursor-pointer"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"mb-2",children:"Upload a CSV file with the following columns:"}),e.jsxs("div",{className:"bg-muted p-2 rounded-md text-xs mb-2",children:[e.jsx("p",{children:"name,quantity,cost,category"}),e.jsx("p",{children:'"Product Name",10,99.99,Baseball'}),e.jsx("p",{children:'"Another Product",0,49.99,Basketball'})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.jsx("p",{className:"mb-2",children:"Notes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Required columns: name, quantity, cost"}),e.jsx("li",{children:'Category is optional (defaults to "Uncategorized")'}),e.jsx("li",{children:"Quantity can be zero or any number"}),e.jsx("li",{children:"Cost must be greater than zero"}),e.jsx("li",{children:"Rows with empty names will be skipped"}),e.jsx("li",{children:"Headers are case-insensitive and flexible"})]})]})]})]})}var vt="Collapsible",[jn,_n]=Vt(vt),[vn,yt]=jn(vt),zs=o.forwardRef((t,s)=>{const{__scopeCollapsible:r,open:a,defaultOpen:n,disabled:l,onOpenChange:m,...i}=t,[x=!1,u]=Qt({prop:a,defaultProp:n,onChange:m});return e.jsx(vn,{scope:r,disabled:l,contentId:Tr(),open:x,onOpenToggle:o.useCallback(()=>u(d=>!d),[u]),children:e.jsx(Fe.div,{"data-state":wt(x),"data-disabled":l?"":void 0,...i,ref:s})})});zs.displayName=vt;var Fs="CollapsibleTrigger",Os=o.forwardRef((t,s)=>{const{__scopeCollapsible:r,...a}=t,n=yt(Fs,r);return e.jsx(Fe.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":wt(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...a,ref:s,onClick:dt(t.onClick,n.onOpenToggle)})});Os.displayName=Fs;var bt="CollapsibleContent",Ls=o.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=yt(bt,t.__scopeCollapsible);return e.jsx(Gt,{present:r||n.open,children:({present:l})=>e.jsx(yn,{...a,ref:s,present:l})})});Ls.displayName=bt;var yn=o.forwardRef((t,s)=>{const{__scopeCollapsible:r,present:a,children:n,...l}=t,m=yt(bt,r),[i,x]=o.useState(a),u=o.useRef(null),d=Bt(s,u),y=o.useRef(0),j=y.current,_=o.useRef(0),R=_.current,v=m.open||i,p=o.useRef(v),C=o.useRef();return o.useEffect(()=>{const c=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(c)},[]),Er(()=>{const c=u.current;if(c){C.current=C.current||{transitionDuration:c.style.transitionDuration,animationName:c.style.animationName},c.style.transitionDuration="0s",c.style.animationName="none";const E=c.getBoundingClientRect();y.current=E.height,_.current=E.width,p.current||(c.style.transitionDuration=C.current.transitionDuration,c.style.animationName=C.current.animationName),x(a)}},[m.open,a]),e.jsx(Fe.div,{"data-state":wt(m.open),"data-disabled":m.disabled?"":void 0,id:m.contentId,hidden:!v,...l,ref:d,style:{"--radix-collapsible-content-height":j?`${j}px`:void 0,"--radix-collapsible-content-width":R?`${R}px`:void 0,...t.style},children:v&&n})});function wt(t){return t?"open":"closed"}var bn=zs;const $s=bn,qs=Os,Vs=Ls,wn=t=>{switch(t){case"stream":return e.jsx(os,{className:"h-4 w-4"});case"check":return e.jsx(Je,{className:"h-4 w-4"});case"manual":return e.jsx(ds,{className:"h-4 w-4"});case"upload":return e.jsx(Ar,{className:"h-4 w-4"});default:return null}},Nn=t=>{switch(t){case"stream":return"Stream Sale";case"check":return"Inventory Check";case"manual":return"Manual Update";case"upload":return"Bulk Upload";default:return"Unknown"}};function Cn({inventoryChanges:t}){const s=o.useMemo(()=>[...t||[]].sort((r,a)=>new Date(a.timestamp).getTime()-new Date(r.timestamp).getTime()),[t]);return t!=null&&t.length?e.jsxs(Y,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Inventory History"})}),e.jsx(K,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Date & Time"}),e.jsx(S,{children:"Type"}),e.jsx(S,{children:"User"}),e.jsx(S,{children:"Description"}),e.jsx(S,{children:"Changes"})]})}),e.jsx(me,{children:s.map(r=>e.jsxs(J,{children:[e.jsx(k,{children:new Date(r.timestamp).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[wn(r.type),e.jsx("span",{children:Nn(r.type)})]})}),e.jsx(k,{children:r.user.name}),e.jsx(k,{children:r.description}),e.jsx(k,{children:e.jsx("div",{className:"space-y-1",children:r.changes.map((a,n)=>e.jsxs("div",{className:"text-sm",children:[a.itemName,":"," ",e.jsxs("span",{className:a.difference<0?"text-red-500":"text-green-500",children:[a.difference>0?"+":"",a.difference]})]},n))})})]},r.id))})]})})]}):e.jsxs(Y,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Inventory History"})}),e.jsx(K,{children:e.jsx("p",{className:"text-muted-foreground text-center py-4",children:"No inventory changes recorded yet."})})]})}function Sn({inventory:t,editedInventory:s,setInventory:r,setEditedInventory:a,categories:n,setCategories:l,onViewChange:m,inventoryChanges:i,setInventoryChanges:x}){const{user:u}=Ee(),[d,y]=o.useState("inventory"),[j,_]=o.useState(!1),[R,v]=o.useState(!1),[p,C]=o.useState({id:"",name:"",quantity:0,cost:0,category:""}),[c,E]=o.useState(!1),[g,D]=o.useState(""),[O,ne]=o.useState(""),[oe,le]=o.useState("all"),[te,ie]=o.useState(""),[M,b]=o.useState([]),[N,$]=o.useState(""),[H,h]=o.useState(!1),[T,z]=o.useState(!1),[A,B]=o.useState(null),Se=f=>{if(!u)return;const U=f.map(Z=>({...Z,id:Ce("inv-"),category:Z.category||"Uncategorized"})),F=[...t,...U],L=ke("upload",u,t,F,`Bulk upload of ${f.length} items by ${u.name}`);r(F),x([L,...i]),_(!1),D("")},G=f=>{D(f)},fe=()=>{if(u&&p.name&&p.quantity>=0&&p.cost>0){const f={...p,id:Ce("inv-"),category:p.category||"Uncategorized"},U=[...t,f],F=ke("manual",u,t,U,`Added new item: ${f.name}`);r(U),x([F,...i]),C({id:"",name:"",quantity:0,cost:0,category:""}),v(!1)}},Ke=()=>{if(u){if(c){const f=ke("manual",u,t,s,`Bulk edit by ${u.name}`);r(s),x([f,...i])}E(!c)}},st=(f,U,F)=>{a(L=>L.map(Z=>{if(Z.id!==f)return Z;let rt=F;if(U==="quantity"){const Le=parseInt(F.toString());rt=isNaN(Le)?0:Le}else if(U==="cost"){const Le=parseFloat(F.toString());rt=isNaN(Le)?0:Le}return{...Z,[U]:rt}}))},Qs=()=>{te&&!n.includes(te)&&(l([...n,te]),ie(""))},Gs=f=>{if(!u)return;const U=t.map(L=>L.category===f?{...L,category:"Uncategorized"}:L),F=ke("manual",u,t,U);l(n.filter(L=>L!==f)),r(U),x([F,...i]),oe===f&&le("all")},Hs=f=>{b(U=>U.includes(f)?U.filter(F=>F!==f):[...U,f])},Ws=()=>{if(!u||!N)return;const f=t.map(F=>M.includes(F.id)?{...F,category:N}:F),U=ke("manual",u,t,f,`Bulk category update to "${N}" for ${M.length} items`);r(f),x([U,...i]),b([]),$("")},Ys=f=>{if(!u)return;const U=t.find(Z=>Z.id===f);if(!U)return;const F=t.filter(Z=>Z.id!==f),L=ke("manual",u,t,F,`Deleted item: ${U.name}`);r(F),x([L,...i]),B(null)},Ks=()=>{const f=s.reduce((U,F)=>U+F.quantity*F.cost,0);return re(f)},Nt=o.useMemo(()=>s.filter(f=>f.name.toLowerCase().includes(O.toLowerCase())&&(oe==="all"||f.category===oe)).sort((f,U)=>f.category.localeCompare(U.category)),[s,O,oe]),Zs=o.useMemo(()=>{const f=Nt.reduce((U,F)=>(U[F.category]||(U[F.category]=[]),U[F.category].push(F),U),{});return Object.entries(f).map(([U,F])=>({category:U,items:F,totalValue:F.reduce((L,Z)=>L+Z.quantity*Z.cost,0)}))},[Nt]),Js=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(I,{variant:"secondary",className:"bg-accent text-accent-foreground hover:bg-accent/90",onClick:()=>_(!j),children:j?"Hide Upload":"Upload Inventory"}),e.jsx(I,{onClick:()=>v(!R),children:R?"Hide Add Form":"Add New Item"}),e.jsx(I,{onClick:Ke,children:c?"Save All Changes":"Edit All"}),e.jsxs(I,{variant:"secondary",className:"bg-secondary text-secondary-foreground hover:bg-secondary/90",onClick:()=>h(!H),children:["Categories ",M.length>0&&`(${M.length})`]})]}),j&&e.jsxs(Y,{className:"form-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Upload Inventory Sheet"})}),e.jsx(K,{children:e.jsx(gn,{onUploadSuccess:Se,onUploadError:G})})]}),g&&e.jsxs(Ge,{variant:"destructive",children:[e.jsx(Pr,{className:"h-4 w-4"}),e.jsx(tt,{children:"Error"}),e.jsx(He,{children:g})]}),R&&e.jsxs(Y,{className:"form-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Add New Item"})}),e.jsxs(K,{children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"item-name",children:"Name"}),e.jsx(V,{id:"item-name",value:p.name,onChange:f=>C({...p,name:f.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"item-quantity",children:"Quantity"}),e.jsx(V,{id:"item-quantity",type:"number",value:p.quantity.toString(),onChange:f=>{const U=parseInt(f.target.value);C({...p,quantity:isNaN(U)?0:U})}})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"item-cost",children:"Cost"}),e.jsx(V,{id:"item-cost",type:"number",step:"0.01",value:p.cost.toString(),onChange:f=>{const U=parseFloat(f.target.value);C({...p,cost:isNaN(U)?0:U})}})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"item-category",children:"Category"}),e.jsxs(Re,{onValueChange:f=>C({...p,category:f}),children:[e.jsx(we,{children:e.jsx(Te,{placeholder:"Select category"})}),e.jsx(Ne,{children:n.map(f=>e.jsx(ae,{value:f,children:f},f))})]})]})]}),e.jsx(I,{className:"mt-4",onClick:fe,children:"Add Item"})]})]}),H&&e.jsxs(Y,{className:"form-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Manage Categories"})}),e.jsxs(K,{children:[e.jsxs("div",{className:"flex space-x-2 mb-4",children:[e.jsx(V,{placeholder:"New category name",value:te,onChange:f=>ie(f.target.value)}),e.jsxs(I,{onClick:Qs,children:[e.jsx(as,{className:"mr-2 h-4 w-4"})," Add Category"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(f=>e.jsxs("div",{className:"flex items-center bg-secondary text-secondary-foreground rounded-full px-3 py-1",children:[f,f!=="Other"&&f!=="Uncategorized"&&e.jsx(I,{variant:"ghost",size:"sm",className:"ml-2 h-4 w-4 p-0",onClick:()=>Gs(f),children:e.jsx(ms,{className:"h-3 w-3"})})]},f))}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Assign Category to Selected Items"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Re,{value:N,onValueChange:$,children:[e.jsx(we,{className:"w-[180px]",children:e.jsx(Te,{placeholder:"Select category"})}),e.jsx(Ne,{children:n.map(f=>e.jsx(ae,{value:f,children:f},f))})]}),e.jsx(I,{onClick:Ws,disabled:!N||M.length===0,children:"Assign to Selected"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[M.length," item",M.length!==1?"s":""," selected"]})]})]})]}),e.jsxs(Y,{className:"glass-card",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(ee,{children:"Current Inventory"}),e.jsxs("div",{className:"text-2xl font-bold",children:["Total Value: ",Ks()]})]}),e.jsxs($s,{open:T,onOpenChange:z,children:[e.jsx(qs,{asChild:!0,children:e.jsx(I,{variant:"outline",size:"icon",className:"w-10 p-0",children:e.jsx(mt,{className:"h-4 w-4"})})}),e.jsx(Vs,{className:"absolute right-0 mt-2 w-[300px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{type:"text",placeholder:"Search inventory...",value:O,onChange:f=>ne(f.target.value),className:"pl-10"}),e.jsx(mt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})})]})]}),e.jsxs(K,{children:[e.jsx("div",{className:"mb-4 flex items-center justify-end space-x-4",children:e.jsxs(Re,{value:oe,onValueChange:le,children:[e.jsx(we,{className:"w-[180px]",children:e.jsx(Te,{placeholder:"Filter by category"})}),e.jsxs(Ne,{children:[e.jsx(ae,{value:"all",children:"All Categories"}),n.map(f=>e.jsx(ae,{value:f,children:f},f))]})]})}),Zs.map(({category:f,items:U,totalValue:F})=>e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:f}),e.jsx("div",{className:"data-table",children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{className:"w-[50px]",children:"Select"}),e.jsx(S,{children:"Name"}),e.jsx(S,{children:"Quantity"}),e.jsx(S,{children:"Cost"}),e.jsx(S,{children:"Total Value"}),c&&e.jsx(S,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(me,{children:U.map(L=>e.jsxs(J,{children:[e.jsx(k,{children:e.jsx(Qe,{checked:M.includes(L.id),onCheckedChange:()=>Hs(L.id)})}),e.jsx(k,{children:c?e.jsx(V,{value:L.name,onChange:Z=>st(L.id,"name",Z.target.value)}):L.name}),e.jsx(k,{children:c?e.jsx(V,{type:"number",value:L.quantity.toString(),onChange:Z=>st(L.id,"quantity",Z.target.value)}):L.quantity}),e.jsx(k,{children:c?e.jsx(V,{type:"number",step:"0.01",value:L.cost.toString(),onChange:Z=>st(L.id,"cost",Z.target.value)}):re(L.cost)}),e.jsx(k,{children:re(L.quantity*L.cost)}),c&&e.jsx(k,{children:e.jsxs(ve,{children:[e.jsx(un,{asChild:!0,children:e.jsx(I,{variant:"outline",size:"sm",onClick:()=>B(L.id),children:e.jsx(ns,{className:"h-4 w-4"})})}),e.jsxs(he,{children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Confirm Deletion"}),e.jsx(ze,{children:"Are you sure you want to delete this item? This action cannot be undone."})]}),e.jsxs(ye,{children:[e.jsx(I,{variant:"outline",onClick:()=>B(null),children:"Cancel"}),e.jsx(I,{variant:"destructive",onClick:()=>Ys(L.id),children:"Delete"})]})]})]})})]},L.id))})]})}),e.jsxs("div",{className:"mt-2 text-right font-semibold",children:["Total: ",re(F)]})]},f))]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"page-title",children:"Inventory Management"}),e.jsx(I,{onClick:()=>m("dashboard"),children:"Back to Dashboard"})]}),e.jsxs(Ms,{value:d,onValueChange:y,children:[e.jsxs(jt,{children:[e.jsx(We,{value:"inventory",children:"Current Inventory"}),e.jsxs(We,{value:"history",className:"flex items-center gap-2",children:[e.jsx(ds,{className:"h-4 w-4"}),"History"]})]}),e.jsx(Ye,{value:"inventory",children:Js()}),e.jsx(Ye,{value:"history",children:e.jsx(Cn,{inventoryChanges:i})})]})]})}function kn({streams:t,setStreams:s,inventory:r,setInventory:a,onViewChange:n,inventoryChanges:l,setInventoryChanges:m}){const{user:i}=Ee(),[x,u]=o.useState("current"),[d,y]=o.useState(null),[j,_]=o.useState("date"),[R,v]=o.useState("desc"),[p,C]=o.useState("all"),[c,E]=o.useState({date:"",startTime:"",endTime:"",streamer:(i==null?void 0:i.name)||"",streamerId:(i==null?void 0:i.streamerId)||"",sorter:"",platform:"tiktok",totalSales:0}),[g,D]=o.useState([]),[O,ne]=o.useState(""),oe=o.useMemo(()=>{const h=new Set(t.map(T=>T.streamer||"").filter(Boolean));return Array.from(h)},[t]),le=o.useMemo(()=>{let h=[...t];return p!=="all"&&(h=h.filter(T=>T.streamer===p)),(i==null?void 0:i.role)!=="admin"&&(i==null?void 0:i.role)!=="manager"&&(h=h.filter(T=>T.streamerId===(i==null?void 0:i.streamerId))),h.sort((T,z)=>{let A=0;switch(j){case"date":A=new Date(T.date||"").getTime()-new Date(z.date||"").getTime();break;case"streamer":A=(T.streamer||"").localeCompare(z.streamer||"");break;case"platform":A=(T.platform||"").localeCompare(z.platform||"");break;case"sales":A=(T.totalSales||0)-(z.totalSales||0);break;default:A=0}return R==="asc"?A:-A})},[t,j,R,p,i]),te=h=>{j===h?v(R==="asc"?"desc":"asc"):(_(h),v("desc"))},ie=()=>{if(i&&c.date&&c.startTime&&c.endTime&&c.sorter){const h={...c,id:Ce("stream-"),soldItems:g};s([...t,h]),E({date:"",startTime:"",endTime:"",streamer:(i==null?void 0:i.name)||"",streamerId:(i==null?void 0:i.streamerId)||"",sorter:"",platform:"tiktok",totalSales:0}),M(g),D([])}},M=(h,T)=>{if(!i)return;a(A=>A.map(B=>{const Se=h.find(G=>G.id===B.id);if(Se){const G=-Se.quantitySold;return{...B,quantity:B.quantity+G}}return B}));const z={id:Ce("change-"),date:new Date().toISOString(),type:"Stream Update",items:h.map(A=>({name:A.name,quantityChange:-A.quantitySold})),user:i.name};m([...l,z])},b=h=>{const T=g.find(z=>z.id===h.id);D(T?z=>z.map(A=>A.id===h.id?{...A,quantitySold:A.quantitySold+1}:A):z=>[...z,{...h,quantitySold:1}])},N=h=>{D(T=>T.filter(z=>z.id!==h))},$=o.useMemo(()=>r.filter(h=>h.name.toLowerCase().includes(O.toLowerCase())),[r,O]),H=()=>{const h=le.reduce((T,z)=>{const A=new Date(z.date).toLocaleString("en-US",{month:"long",year:"numeric"});return T[A]||(T[A]=[]),T[A].push(z),T},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsx(Y,{className:"glass-card",children:e.jsx(K,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex gap-4",children:e.jsxs(Re,{value:p,onValueChange:C,children:[e.jsx(we,{className:"w-[200px]",children:e.jsx(Te,{placeholder:"Filter by streamer"})}),e.jsxs(Ne,{children:[e.jsx(ae,{value:"all",children:"All Streamers"}),oe.map(T=>e.jsx(ae,{value:T,children:T},T))]})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(I,{variant:"outline",onClick:()=>te("date"),className:"flex items-center gap-2",children:["Date",e.jsx(Ze,{className:"h-4 w-4"})]}),e.jsxs(I,{variant:"outline",onClick:()=>te("streamer"),className:"flex items-center gap-2",children:["Streamer",e.jsx(Ze,{className:"h-4 w-4"})]}),e.jsxs(I,{variant:"outline",onClick:()=>te("platform"),className:"flex items-center gap-2",children:["Platform",e.jsx(Ze,{className:"h-4 w-4"})]}),e.jsxs(I,{variant:"outline",onClick:()=>te("sales"),className:"flex items-center gap-2",children:["Sales",e.jsx(Ze,{className:"h-4 w-4"})]})]})]})})}),Object.entries(h).map(([T,z])=>{const A=z.reduce((G,fe)=>G+(fe.totalSales||0),0),B=z.reduce((G,fe)=>G+ot(fe.soldItems),0),Se=lt(A,B);return e.jsxs(Y,{className:"glass-card",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ee,{children:T}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Sales"}),e.jsx("p",{className:"text-lg font-semibold",children:re(A)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Total Cost"}),e.jsx("p",{className:"text-lg font-semibold",children:re(B)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Gross Profit"}),e.jsx("p",{className:`text-lg font-semibold ${Se>=0?"text-green-500":"text-red-500"}`,children:re(Se)})]})]})]})}),e.jsx(K,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Date"}),e.jsx(S,{children:"Streamer"}),e.jsx(S,{children:"Platform"}),e.jsx(S,{children:"Time"}),e.jsx(S,{children:"Duration"}),e.jsx(S,{children:"Sales"}),e.jsx(S,{children:"Cost"}),e.jsx(S,{children:"Profit"}),e.jsx(S,{children:"Actions"})]})}),e.jsx(me,{children:z.map(G=>{const fe=ot(G.soldItems),Ke=lt(G.totalSales||0,fe);return e.jsxs(J,{children:[e.jsx(k,{children:G.date}),e.jsx(k,{children:G.streamer}),e.jsx(k,{className:"capitalize",children:G.platform}),e.jsxs(k,{children:[Pe(G.startTime)," - ",Pe(G.endTime)]}),e.jsxs(k,{children:[It(G.startTime,G.endTime)," hours"]}),e.jsx(k,{children:re(G.totalSales||0)}),e.jsx(k,{children:re(fe)}),e.jsx(k,{className:Ke>=0?"text-green-500":"text-red-500",children:re(Ke)}),e.jsx(k,{children:e.jsx(I,{variant:"ghost",size:"sm",onClick:()=>y(G.id),children:e.jsx(us,{className:"h-4 w-4"})})})]},G.id)})})]})})]},T)})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"page-title",children:"Stream Management"}),e.jsx(I,{onClick:()=>n("dashboard"),children:"Back to Dashboard"})]}),e.jsxs(Ms,{value:x,onValueChange:u,children:[e.jsxs(jt,{children:[e.jsx(We,{value:"current",children:"Current Stream"}),e.jsx(We,{value:"history",children:"Stream History"})]}),e.jsx(Ye,{value:"current",children:e.jsxs(Y,{className:"form-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Add New Stream"})}),e.jsxs(K,{children:[e.jsxs("div",{className:"form-grid mb-6",children:[e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-date",children:"Date"}),e.jsx(V,{id:"stream-date",type:"date",value:c.date,onChange:h=>E({...c,date:h.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-start-time",children:"Start Time"}),e.jsx(V,{id:"stream-start-time",type:"time",value:c.startTime,onChange:h=>E({...c,startTime:h.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-end-time",children:"End Time"}),e.jsx(V,{id:"stream-end-time",type:"time",value:c.endTime,onChange:h=>E({...c,endTime:h.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-platform",children:"Platform"}),e.jsxs(Re,{value:c.platform,onValueChange:h=>E({...c,platform:h}),children:[e.jsx(we,{children:e.jsx(Te,{placeholder:"Select platform"})}),e.jsxs(Ne,{children:[e.jsx(ae,{value:"tiktok",children:"TikTok"}),e.jsx(ae,{value:"fanatics",children:"Fanatics"})]})]})]}),((i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="manager")&&e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-streamer",children:"Streamer"}),e.jsx(V,{id:"stream-streamer",value:c.streamer,onChange:h=>E({...c,streamer:h.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-sorter",children:"Sorter"}),e.jsx(V,{id:"stream-sorter",value:c.sorter,onChange:h=>E({...c,sorter:h.target.value})})]}),e.jsxs("div",{className:"input-group",children:[e.jsx(q,{htmlFor:"stream-sales",children:"Total Sales"}),e.jsx(V,{id:"stream-sales",type:"number",step:"0.01",value:c.totalSales,onChange:h=>E({...c,totalSales:parseFloat(h.target.value)||0})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{children:"Select Inventory Items for Stream"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mt,{className:"w-5 h-5 text-muted-foreground"}),e.jsx(V,{type:"text",placeholder:"Search products...",value:O,onChange:h=>ne(h.target.value),className:"flex-grow"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto rounded-md border border-border",children:$.map(h=>e.jsxs("div",{className:"stream-item",onClick:()=>b(h),children:[e.jsxs("span",{children:[h.name," - ",h.quantity," available"]}),e.jsx(I,{variant:"ghost",size:"sm",onClick:T=>{T.stopPropagation(),b(h)},children:"Add"})]},h.id))}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Selected Items:"}),g.map(h=>e.jsxs("div",{className:"flex justify-between items-center mt-1 bg-secondary/50 p-2 rounded",children:[e.jsx("span",{children:h.name}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{type:"number",value:h.quantitySold,onChange:T=>{const z=parseInt(T.target.value);D(A=>A.map(B=>B.id===h.id?{...B,quantitySold:z}:B))},className:"w-20"}),e.jsx(I,{variant:"ghost",size:"icon",onClick:()=>N(h.id),children:e.jsx(ms,{className:"h-4 w-4"})})]})]},h.id))]})]}),e.jsx(I,{className:"mt-6",onClick:ie,children:"Add Stream"})]})]})}),e.jsx(Ye,{value:"history",children:H()})]}),d&&e.jsx(ve,{open:!!d,onOpenChange:()=>y(null),children:e.jsxs(he,{className:"max-w-3xl",children:[e.jsx(xe,{children:e.jsx(pe,{children:"Stream Details"})}),(()=>{const h=t.find(A=>A.id===d);if(!h)return null;const T=ot(h.soldItems),z=lt(h.totalSales||0,T);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Date"}),e.jsx("p",{className:"font-medium",children:h.date})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Platform"}),e.jsx("p",{className:"font-medium capitalize",children:h.platform})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Time"}),e.jsxs("p",{className:"font-medium",children:[Pe(h.startTime)," - ",Pe(h.endTime)]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"font-medium",children:[It(h.startTime,h.endTime)," hours"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Streamer"}),e.jsx("p",{className:"font-medium",children:h.streamer})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Sorter"}),e.jsx("p",{className:"font-medium",children:h.sorter})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-secondary/20 p-4 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Sales"}),e.jsx("p",{className:"text-lg font-semibold",children:re(h.totalSales||0)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Cost"}),e.jsx("p",{className:"text-lg font-semibold",children:re(T)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gross Profit"}),e.jsx("p",{className:`text-lg font-semibold ${z>=0?"text-green-500":"text-red-500"}`,children:re(z)})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold mb-2",children:"Sold Items:"}),e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Name"}),e.jsx(S,{children:"Quantity Sold"}),e.jsx(S,{children:"Cost per Item"}),e.jsx(S,{children:"Total"})]})}),e.jsx(me,{children:h.soldItems.map(A=>e.jsxs(J,{children:[e.jsx(k,{children:A.name}),e.jsx(k,{children:A.quantitySold}),e.jsx(k,{children:re(A.cost)}),e.jsx(k,{children:re(A.quantitySold*A.cost)})]},A.id))})]})]})]})})()]})})]})}function In({currentView:t,inventory:s,setInventory:r,inventoryChecks:a,setInventoryChecks:n,currentCheck:l,setCurrentCheck:m,onViewChange:i,inventoryChanges:x,setInventoryChanges:u}){const{user:d}=Ee(),[y,j]=o.useState(s.map(b=>({id:b.id,name:b.name,expectedQuantity:b.quantity,actualQuantity:b.quantity,isChecked:!1}))),[_,R]=o.useState(!1),[v,p]=o.useState(null),[C,c]=o.useState(!1),[E,g]=o.useState(null),[D,O]=o.useState(!1),ne=(b,N)=>{j($=>$.map(H=>H.id===b?{...H,actualQuantity:N,isChecked:!0,isCorrect:N===H.expectedQuantity}:H))},oe=b=>{j(N=>N.map($=>$.id===b?{...$,isChecked:!0,isCorrect:!0,actualQuantity:$.expectedQuantity}:$))},le=()=>{if(y.filter(h=>!h.isChecked).length>0){alert("Please check all items before finishing");return}const $=y.filter(h=>!h.isCorrect).length,H={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0],checkedItems:y.map(({id:h,name:T,expectedQuantity:z,actualQuantity:A})=>({id:h,name:T,expectedQuantity:z,actualQuantity:A})),isCorrect:$===0,missingItems:$};n([...a,H]),g(H),$>0?O(!0):i("dashboard")},te=b=>{if(b&&E&&d){const N=s.map(H=>{const h=E.checkedItems.find(T=>T.id===H.id);return h?{...H,quantity:h.actualQuantity}:H}),$=ke("check",d,s,N,`Inventory check by ${d.name}`);r(N),u([$,...x])}c(!1),O(!1),g(null),i("dashboard")},ie=()=>{if(!E)return null;const b=E.checkedItems.filter(N=>N.expectedQuantity!==N.actualQuantity);return e.jsx(ve,{open:D,onOpenChange:O,children:e.jsxs(he,{className:"max-w-3xl",children:[e.jsxs(xe,{children:[e.jsx(pe,{children:"Discrepancies Found"}),e.jsxs(ze,{children:["Found ",b.length," items with incorrect quantities"]})]}),e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Item"}),e.jsx(S,{children:"Expected"}),e.jsx(S,{children:"Actual"}),e.jsx(S,{children:"Difference"})]})}),e.jsx(me,{children:b.map(N=>e.jsxs(J,{children:[e.jsx(k,{children:N.name}),e.jsx(k,{children:N.expectedQuantity}),e.jsx(k,{children:N.actualQuantity}),e.jsx(k,{className:N.actualQuantity<N.expectedQuantity?"text-red-500":"text-green-500",children:N.actualQuantity-N.expectedQuantity})]},N.id))})]}),e.jsxs(ye,{className:"gap-2",children:[e.jsx(I,{variant:"outline",onClick:()=>te(!1),children:"Keep Original Quantities"}),e.jsx(I,{onClick:()=>te(!0),children:"Update Inventory"})]})]})})},M=()=>{if(!v)return null;const b=v.checkedItems.filter(N=>N.expectedQuantity!==N.actualQuantity);return e.jsx(ve,{open:!!v,onOpenChange:()=>p(null),children:e.jsxs(he,{className:"max-w-3xl",children:[e.jsxs(xe,{children:[e.jsx(pe,{children:v.isCorrect?"Inventory Check Details":"Discrepancies Found"}),e.jsxs(ze,{children:["Check completed on ",v.date," at ",Pe(v.time)]})]}),v.isCorrect?e.jsxs(Ge,{children:[e.jsx(Je,{className:"h-4 w-4"}),e.jsx(tt,{children:"Success"}),e.jsx(He,{children:"All quantities were correct during this check."})]}):e.jsxs(e.Fragment,{children:[e.jsxs(Ge,{variant:"destructive",children:[e.jsx(at,{className:"h-4 w-4"}),e.jsx(tt,{children:"Attention Required"}),e.jsxs(He,{children:["Found ",v.missingItems," discrepancies"]})]}),e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Item"}),e.jsx(S,{children:"Expected"}),e.jsx(S,{children:"Actual"}),e.jsx(S,{children:"Difference"})]})}),e.jsx(me,{children:b.map(N=>e.jsxs(J,{children:[e.jsx(k,{children:N.name}),e.jsx(k,{children:N.expectedQuantity}),e.jsx(k,{children:N.actualQuantity}),e.jsx(k,{className:N.expectedQuantity>N.actualQuantity?"text-red-500":"text-green-500",children:N.actualQuantity-N.expectedQuantity})]},N.id))})]})]}),e.jsx(ye,{children:e.jsx(I,{variant:"outline",onClick:()=>p(null),children:"Close"})})]})})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Inventory Check"}),e.jsxs("div",{className:"space-x-4",children:[e.jsx(I,{onClick:()=>i("dashboard"),children:"Back to Dashboard"}),e.jsx(I,{onClick:le,children:"Finish Check"})]})]}),e.jsxs(Y,{className:"glass-card",children:[e.jsx(X,{children:e.jsx(ee,{children:"Check Inventory Quantities"})}),e.jsx(K,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Item Name"}),e.jsx(S,{children:"Expected Quantity"}),e.jsx(S,{children:"Current Value"}),e.jsx(S,{children:"Actions"}),e.jsx(S,{children:"New Quantity"})]})}),e.jsx(me,{children:y.map(b=>{var N;return e.jsxs(J,{className:b.isChecked?b.isCorrect?"bg-green-500/10":"bg-red-500/10":"",children:[e.jsx(k,{children:b.name}),e.jsx(k,{children:b.expectedQuantity}),e.jsx(k,{children:re(b.expectedQuantity*(((N=s.find($=>$.id===b.id))==null?void 0:N.cost)||0))}),e.jsx(k,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(I,{size:"sm",variant:"outline",className:"w-20",onClick:()=>oe(b.id),disabled:b.isChecked&&b.isCorrect,children:[e.jsx(Je,{className:"mr-2 h-4 w-4"}),"Yes"]}),e.jsxs(I,{size:"sm",variant:"outline",className:"w-20",onClick:()=>{const $=document.getElementById(`quantity-${b.id}`);$==null||$.focus()},disabled:b.isChecked&&b.isCorrect,children:[e.jsx(at,{className:"mr-2 h-4 w-4"}),"No"]})]})}),e.jsx(k,{children:e.jsx(V,{id:`quantity-${b.id}`,type:"number",className:"w-24",value:b.actualQuantity,onChange:$=>ne(b.id,parseInt($.target.value)||0),disabled:b.isChecked&&b.isCorrect})})]},b.id)})})]})})]}),e.jsxs($s,{open:_,onOpenChange:R,className:"w-full",children:[e.jsx(qs,{asChild:!0,children:e.jsxs(I,{variant:"outline",className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"View Previous Checks"}),e.jsx(Dr,{className:`h-4 w-4 transform transition-transform ${_?"rotate-180":""}`})]})}),e.jsx(Vs,{className:"mt-4",children:e.jsxs(Y,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Previous Inventory Checks"})}),e.jsx(K,{children:e.jsxs(ce,{children:[e.jsx(de,{children:e.jsxs(J,{children:[e.jsx(S,{children:"Date"}),e.jsx(S,{children:"Time"}),e.jsx(S,{children:"Status"}),e.jsx(S,{children:"Discrepancies"}),e.jsx(S,{children:"Actions"})]})}),e.jsx(me,{children:a.map(b=>e.jsxs(J,{children:[e.jsx(k,{children:b.date}),e.jsx(k,{children:Pe(b.time)}),e.jsx(k,{children:e.jsx("span",{className:`inline-flex items-center gap-1 ${b.isCorrect?"text-green-500":"text-red-500"}`,children:b.isCorrect?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"h-4 w-4"}),"Correct"]}):e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"h-4 w-4"}),"Discrepancies Found"]})})}),e.jsx(k,{children:b.missingItems}),e.jsx(k,{children:e.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>p(b),children:[e.jsx(us,{className:"h-4 w-4 mr-2"}),"View Details"]})})]},b.id))})]})})]})})]}),ie(),M()]})}const Rn=[{id:1,name:"2021 Topps Chrome",quantity:50,cost:199.99,category:"Baseball"},{id:2,name:"2022 Panini Prizm",quantity:30,cost:299.99,category:"Basketball"},{id:3,name:"2023 Bowman Draft",quantity:40,cost:149.99,category:"Baseball"},{id:4,name:"2023 Upper Deck Series 1",quantity:25,cost:89.99,category:"Hockey"},{id:5,name:"2022 Panini Contenders",quantity:35,cost:179.99,category:"Football"}],Tn=["Baseball","Basketball","Football","Hockey","Other","Uncategorized"],En=[{id:1,date:"2023-11-01",startTime:"19:00",endTime:"21:30",streamer:"John Doe",sorter:"Jane Smith",soldItems:[{id:1,name:"2021 Topps Chrome",quantity:50,cost:199.99,category:"Baseball",quantitySold:5},{id:2,name:"2022 Panini Prizm",quantity:30,cost:299.99,category:"Basketball",quantitySold:3}]},{id:2,date:"2023-11-02",startTime:"18:00",endTime:"20:00",streamer:"Mike Johnson",sorter:"Sarah Williams",soldItems:[{id:3,name:"2023 Bowman Draft",quantity:40,cost:149.99,category:"Baseball",quantitySold:2},{id:4,name:"2023 Upper Deck Series 1",quantity:25,cost:89.99,category:"Hockey",quantitySold:1}]}];function An(){const{user:t,isAuthenticated:s}=Ee(),[r,a]=o.useState("dashboard"),[n,l]=o.useState(()=>W.loadInventory(Rn)),[m,i]=o.useState(n),[x,u]=o.useState(()=>W.loadStreams(En)),[d,y]=o.useState(()=>W.loadCategories(Tn)),[j,_]=o.useState(()=>W.loadInventoryChecks([])),[R,v]=o.useState(null),[p,C]=o.useState(()=>W.loadInventoryChanges([]));if(o.useEffect(()=>{W.saveInventory(n)},[n]),o.useEffect(()=>{W.saveStreams(x)},[x]),o.useEffect(()=>{W.saveCategories(d)},[d]),o.useEffect(()=>{W.saveInventoryChecks(j)},[j]),o.useEffect(()=>{W.saveInventoryChanges(p)},[p]),o.useEffect(()=>{i(n)},[n]),!s)return e.jsx(sn,{});const c=()=>et(t,"view_costs")?m.reduce((O,ne)=>O+ne.quantity*ne.cost,0).toLocaleString("en-US",{style:"currency",currency:"USD"}):"Hidden",E=()=>{const D={id:Date.now().toString(),date:new Date().toISOString().split("T")[0],time:new Date().toTimeString().split(" ")[0],checkedItems:n.map(O=>({id:O.id,name:O.name,expectedQuantity:O.quantity,actualQuantity:O.quantity})),isCorrect:!0,missingItems:0};v(D),a("inventoryCheck")},g=()=>{switch(r){case"dashboard":return e.jsx(fn,{totalValue:c(),totalStreams:x.length,onViewChange:a,onStartInventoryCheck:E});case"inventory":return e.jsx(Sn,{inventory:n,editedInventory:m,setInventory:l,setEditedInventory:i,categories:d,setCategories:y,onViewChange:a,inventoryChanges:p,setInventoryChanges:C});case"streams":return e.jsx(kn,{streams:x,setStreams:u,inventory:n,setInventory:l,onViewChange:a,inventoryChanges:p,setInventoryChanges:C});case"inventoryCheck":case"inventoryCheckQuantity":case"inventoryCheckResult":case"pastChecks":case"checkDetails":return e.jsx(In,{currentView:r,inventory:n,setInventory:l,inventoryChecks:j,setInventoryChecks:_,currentCheck:R,setCurrentCheck:v,onViewChange:a,inventoryChanges:p,setInventoryChanges:C});case"users":return et(t,"manage_users")?e.jsx(_s,{users:W.loadUsers([]),onUpdateUsers:D=>W.saveUsers(D)}):null;default:return null}};return e.jsx(Ja,{currentView:r,onViewChange:a,children:g()})}const Bs=document.getElementById("root");if(!Bs)throw new Error("Failed to find the root element");hs(Bs).render(e.jsx(o.StrictMode,{children:e.jsx(Na,{children:e.jsx(ba,{children:e.jsx(An,{})})})}));
//# sourceMappingURL=index-YCBzS1px.js.map
